<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Paula</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  overflow: hidden;
  cursor: none;
}
canvas {
  position: fixed;
  top: 0;
  left: 0;
  display: block;
}
</style>
</head>

<body>
<canvas id="canvas"></canvas>

<script>
(() => {
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
  }
  resize();
  addEventListener("resize", resize);

  const TEXTO = "Paula üíñ";
  const FRASES = [
    "Te quiero",
    "Te adoro",
    "Te aprecio",
    "Me importas",
    "Sos especial",
    "Te pienso",
    "Me haces feliz",
    "Siempre contigo"
  ];

  let tiempo = 0;
  const particulas = [];
  const frases = [];

  // ===== PART√çCULA =====
  class Particula {
    constructor(x, y, color = "hotpink", fuerza = 1) {
      this.x = x;
      this.y = y;
      this.vx = (Math.random() - 0.5) * 2 * fuerza;
      this.vy = (Math.random() - 0.5) * 2 * fuerza;
      this.size = Math.random() * 2 + 0.5;
      this.life = Math.random() * 100 + 80;
      this.color = color;
    }
    update() {
      this.x += this.vx;
      this.y += this.vy;
      this.life--;
    }
    draw() {
      ctx.fillStyle = this.color;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  // ===== FRASE =====
  class Frase {
    constructor(x, y, texto) {
      this.x = x;
      this.y = y;
      this.texto = texto;
      this.alpha = 1;
    }
    update() {
      this.y -= 0.4;
      this.alpha -= 0.01;
      if (this.alpha <= 0) {
        for (let i = 0; i < 40; i++) {
          particulas.push(new Particula(this.x, this.y, "pink", 2));
        }
        return false;
      }
      return true;
    }
    draw() {
      ctx.save();
      ctx.globalAlpha = this.alpha;
      ctx.fillStyle = "pink";
      ctx.font = "28px Arial";
      ctx.textAlign = "center";
      ctx.shadowColor = "hotpink";
      ctx.shadowBlur = 20;
      ctx.fillText(this.texto, this.x, this.y);
      ctx.restore();
    }
  }

  // ===== TEXTO EN PART√çCULAS =====
  const textoCanvas = document.createElement("canvas");
  const tctx = textoCanvas.getContext("2d");

  function crearTextoParticulas() {
    textoCanvas.width = 500;
    textoCanvas.height = 150;
    tctx.clearRect(0,0,500,150);
    tctx.fillStyle = "white";
    tctx.font = "80px Arial";
    tctx.textAlign = "center";
    tctx.textBaseline = "middle";
    tctx.fillText(TEXTO, 250, 75);

    const data = tctx.getImageData(0,0,500,150).data;
    for (let y = 0; y < 150; y += 4) {
      for (let x = 0; x < 500; x += 4) {
        const i = (y * 500 + x) * 4;
        if (data[i + 3] > 150) {
          particulas.push(
            new Particula(
              canvas.width/2 - 250 + x,
              canvas.height/2 - 75 + y,
              "hotpink",
              0.2
            )
          );
        }
      }
    }
  }
  crearTextoParticulas();

  // ===== EVENTOS =====
  addEventListener("mousemove", e => {
    for (let i = 0; i < 2; i++) {
      particulas.push(new Particula(e.clientX, e.clientY));
    }
  });

  addEventListener("click", e => {
    const t = FRASES[Math.floor(Math.random() * FRASES.length)];
    frases.push(new Frase(e.clientX, e.clientY, t));
  });

  // ===== LOOP =====
  function animate() {
    tiempo += 0.03;

    ctx.fillStyle = "rgba(0,0,0,0.2)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Texto respirando
    const escala = 1 + Math.sin(tiempo) * 0.04;
    ctx.save();
    ctx.translate(canvas.width/2, canvas.height/2);
    ctx.scale(escala, escala);
    ctx.restore();

    // Frases
    for (let i = frases.length - 1; i >= 0; i--) {
      if (!frases[i].update()) frases.splice(i, 1);
      else frases[i].draw();
    }

    // Part√≠culas
    for (let i = particulas.length - 1; i >= 0; i--) {
      particulas[i].update();
      particulas[i].draw();
      if (particulas[i].life <= 0) particulas.splice(i, 1);
    }

    // Glitch
    if (Math.random() < 0.035) {
      const y = Math.random() * canvas.height;
      const h = Math.random() * 25 + 5;
      ctx.drawImage(canvas, 0, y, canvas.width, h,
        Math.random()*20-10, y, canvas.width, h);
    }

    requestAnimationFrame(animate);
  }

  animate();
})();
</script>
</body>
</html>
